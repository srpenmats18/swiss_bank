
# Complete authentication flow test with your session ID

SESSION_ID="3cc5f3db-f48a-4454-bfea-585715f709d7"

echo "üîê Testing Swiss Bank Authentication Flow"
echo "Session ID: $SESSION_ID"

echo -e "\n1. Verifying contact details..."
curl -X POST http://127.0.0.1:8001/api/auth/verify-contact \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "session_id=3cc5f3db-f48a-4454-bfea-585715f709d7&email=chanakyakanakamds@gmail.com"

echo -e "\n\n2. Checking session status..."
curl http://127.0.0.1:8001/api/auth/session/$SESSION_ID

echo -e "\n\n3. Initiating OTP (if contact verification succeeded)..."
curl -X POST http://127.0.0.1:8001/api/auth/initiate-otp \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "session_id=$SESSION_ID"

echo -e "\n\n4. Testing OTP verification (with dummy OTP)..."
curl -X POST http://127.0.0.1:8001/api/auth/verify-otp \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "session_id=$SESSION_ID&otp=123456"

echo -e "\n\n‚úÖ Authentication flow test complete!"